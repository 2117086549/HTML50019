<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<title>Duck Hunt JS</title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
<link rel="stylesheet" type="text/css" href="style.css"/>
<script src="scripts/jquery.js"></script>
<script src="scripts/jquery.color.js"></script>

<script src="scripts/duckhunt.js"></script>
<script src="scripts/jquery.spritely-0.6.js" type="text/javascript"></script>
<script>


</script>
<style>
</style>
</head>
<body>
<div id="header"><h1>Duck Hunt via HTML5 + JavaScript<br/><small>with level creator!</small></h1></div>
<div onClick="muteAll();" id="mute" style="cursor:pointer;z-index:5;width:900px;margin:0 auto;"><small>MUTE</small></div>
<div id="gameField">


<div id="game"></div>
<div class="gameinfo" id="ammo"></div>
<div class="gameinfo" id="waves"></div>
<div class="gameinfo" id="ducksKilled"></div>
<div class="gameinfo" id="scoreboard"></div>
<div id="loser" class="messages">
Are you kidding me with that?
<br/><br/>
<div class="tryAgain" onClick="tryAgain();">Try Again</div>
</div>


<div id="winner" class="messages">
You are a champion!  
</div>


<div id="level" class="messages">
Level 1
</div>

</div>

<div id="levelCreate" style="width:900px;margin:0 auto;"><br/>
<strong>Level Creator:</strong><br/>
Waves: <input id="LCwaves" name="LCwaves" size="3" type="text" value="1"/> &nbsp; &nbsp; Starting Ducks: <input name="LCducks" id="LCducks" size="3" type="text" value="2"/> &nbsp; &nbsp; Starting Bullets: <input type="text" name="LCbullets" id="LCbullets" size="3" value="4"/> &nbsp; &nbsp; Wave Time (sec): <input type="text" name="LCwavetime" id="LCwavetime" size="3" value="10"/> &nbsp; &nbsp; Difficulty: <input type="text" name="LCdif" id="LCdif" size="3" value="5"/>
<div id="doit" style="margin-left:15px;display:inline;padding:5px;border:solid;width:100px;text-align:center;cursor:pointer;" onClick="makeLevel()">Bring It On</div>
<br/><br/>
<small>It's probably worth mentioning that it's very possible to crash your browser if you're overzealous with the level creator.  Wave time is the amount of time before the ducks fly away.  Difficulty is rated from 1-10 and controls the speed of the ducks.  Anything over 8 is kind of ridiculous. The bullet and duck counters have a maximum size- you will receive everything you configure but they may not all display if the number of bullets or ducks is too high.</small>
<br/><br/><br/>

<strong>About This Project:</strong><br/>
<small>I built this project to experiment with creating games in javascript.  This was my first game so I wasn't exactly sure what to expect.  Start to finish it took me about 18-20 hours and wound up at just shy of 500 lines of JavaScript.  The first half of my time was spent just getting the basic functions up and going and the bugs identified, the second half organized it all into the Game object variable as it stands now in the <a href="http://mattsurabian.com/duck%20hunt/scripts/duckhunt.js">source</a>.  
<br/><br/>The characters are organized into sprite sheets I created and the animation is a combination of standard <a href="http://jquery.com/">jquery</a>/JavaScript and the <a href="http://www.spritely.net/">spritely</a> plug-in.  I modified spritely slightly so that the ducks would alter the direction they face as they fly around.  Spritely provided methods to adjust the state of the sprite (basically the row in the sheet) but it was not built into the random motion method out of the box, for obvious reasons.<br/><br/>
The most difficult part of the project was cleaning injecting a custom level at any point during game play.  The game object helped immensely with that.  Another issue was ensuring that levels and waves were generated cleanly and only once.  Because many things in this game depend on timers and animation callbacks there were (and likely still are) a few situations were the game could get a bit confused.  One such situation was occuring if a duck was shot just as the wave timer was about to end.  The chain of events would cause the (now defunct) nextWave() function to fire twice pushing you forward an extra wave, or level.  Occassionally both would happen at once and things would be very hairy.  Luckily, once everything was re-organized it was pretty easy to squash that bug by implementing an object variable that was responsible for knowing if a wave was already being cleared.  
<br/><br/>
I'll probably revist this and add some more features at some point.  But for now, enjoy!  Kudos, permanent level suggestions, and bug reports can be sent to: matt at mattsurabian.com.

</small><br/><br/><br/>
<strong>A Word on the iPad</strong><br/>
<small>At some point I'll need to optomize this for the iPad.  Despite being in JavaScript and HTML5 the iPad JavaScript engine just isn't up to the task of running the animations, sounds, and logic concurrently as it stands currently.  Will it run? Yes.  Does it run well? No.  Level Creator Fun?  Fug-et-about-it.  A key issue is the inability to depend on timers.  You say do this in 100ms, the iPad might do it in that, less, or more (oh yeah, Oxford comma!).  Especially if there are several instances and timers running at once.  Multiple sounds playing at once is also a bit dodgey.<br/><br/>
With that said, because it is in HTML5 and JS it would be very easy to compile it via <a href="http://www.phonegap.com/">PhoneGap</a> and make a proper app that would run fine.  Maybe if the graphics weren't all borrowed from Nintendo I'd give it a shot.  I suppose some could be redone in canvas, but I figure if it can't handle the JS there's no point to even try in canvasâ€¦ maybe that's my mistake. </small>
</div>




<audio class="sounds" id="gunSound" preload="auto" style="display: none;" src="sounds/gunSound.wav"></audio>
<audio class="sounds" id="gunSound2" preload="auto" style="display: none;" src="sounds/gunSound2.wav"></audio>
<audio class="sounds" id="laugh" preload="auto" style="display: none;" src="sounds/laugh.wav"></audio>
<audio class="sounds" id="laugh2" preload="auto" style="display: none;" src="sounds/laugh2.wav"></audio>
<audio class="sounds" id="quak" preload="auto" style="display: none;" src="sounds/quak.wav"></audio>
<audio class="sounds" id="thud" preload="auto" style="display: none;" src="sounds/thud.wav"></audio>
<audio class="sounds" id="ohyeah" preload="auto" style="display: none;" src="sounds/ohYeah.wav"></audio>
<audio class="sounds" id="wings" loop="loop" preload="auto" style="display: none;" src="sounds/wings.wav"></audio>
<audio class="sounds" id="quacking" loop="loop" preload="auto" style="display: none;" src="sounds/quacking.wav"></audio>
<audio class="sounds" id="sniff" preload="auto" style="display: none;" src="sounds/sniff.wav"></audio>
<audio class="sounds" id="bark" preload="auto" style="display: none;" src="sounds/barkDucks.wav"></audio>
<audio class="sounds" id="champSound" preload="auto" style="display: none;" src="sounds/champ.wav"></audio>
<audio class="sounds" id="loserSound" preload="auto" style="display: none;" src="sounds/loserSound.wav"></audio>

<div id="info"></div>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-26377557-1']);
  _gaq.push(['_setDomainName', 'mattsurabian.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>